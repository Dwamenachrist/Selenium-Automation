<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Download Weak_Hero Media</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap">
  <style>
    :root {
      --primary: #e50914;
      --primary-hover: #f40612;
      --secondary: #032541;
      --text: #333;
      --text-light: #eee;
      --bg-light: #f8f9fa;
      --bg-dark: #141414;
      --card-light: #ffffff;
      --card-dark: #1f1f1f;
      --border-light: #e6e6e6;
      --border-dark: #333;
      --success: #01b4e4;
      --downloaded: rgba(1, 180, 228, 0.15);
      --shadow-light: 0 8px 30px rgba(0, 0, 0, 0.12);
      --shadow-dark: 0 8px 30px rgba(0, 0, 0, 0.3);
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      --subtitle-color: #01b4e4;
      --video-color: #e67e22;
      --other-color: #9b59b6;
      --hd-color: #27ae60;
      --sd-color: #f39c12;
      --lq-color: #95a5a6;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background-color: var(--bg-light);
      color: var(--text);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      transition: var(--transition);
    }

    .app-container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header {
      background-color: var(--secondary);
      color: white;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .logo {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo span {
      color: var(--primary);
    }

    .logo-icon {
      margin-right: 10px;
      font-size: 2rem;
    }

    main {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem 1rem;
    }

    .container {
      width: 100%;
      max-width: 800px;
      background: var(--card-light);
      padding: 2rem;
      border-radius: 16px;
      box-shadow: var(--shadow-light);
      transition: var(--transition);
    }

    h1 {
      margin-bottom: 1.5rem;
      font-weight: 600;
      font-size: 1.8rem;
      text-align: center;
    }

    h2 {
      font-size: 1.4rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .search-container {
      display: flex;
      gap: 10px;
      margin-bottom: 1.5rem;
    }

    input[type=text] {
      flex: 1;
      padding: 12px 16px;
      border: 2px solid var(--border-light);
      border-radius: 8px;
      font-size: 1rem;
      transition: var(--transition);
      font-family: inherit;
    }

    input[type=text]:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2);
    }

    button {
      padding: 12px 20px;
      border: none;
      background-color: var(--primary);
      color: white;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
      font-family: inherit;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    button:hover {
      background-color: var(--primary-hover);
      transform: translateY(-2px);
    }

    button:active {
      transform: translateY(0);
    }

    .season-container {
      margin-bottom: 2rem;
    }

    .season-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: var(--secondary);
      color: white;
      padding: 12px 16px;
      border-radius: 8px 8px 0 0;
      cursor: pointer;
    }

    .season-header:hover {
      background-color: #043b63;
    }

    .season-content {
      border: 2px solid var(--border-light);
      border-top: none;
      border-radius: 0 0 8px 8px;
      overflow: hidden;
      transition: var(--transition);
      max-height: 0;
      overflow: hidden;
    }

    .season-content.open {
      max-height: 500px;
      overflow-y: auto;
    }

    .episode-list-container {
      margin: 1.5rem 0;
      border-radius: 12px;
      border: 2px solid var(--border-light);
      overflow: hidden;
      transition: var(--transition);
    }

    .episode-list-header {
      background-color: var(--secondary);
      color: white;
      padding: 12px 16px;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
    }

    .selection-controls {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .selection-controls button {
      padding: 8px 12px;
      font-size: 0.85rem;
      background-color: var(--secondary);
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      max-height: 350px;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: var(--primary) var(--bg-light);
    }

    ul::-webkit-scrollbar {
      width: 8px;
    }

    ul::-webkit-scrollbar-track {
      background: var(--bg-light);
    }

    ul::-webkit-scrollbar-thumb {
      background-color: var(--primary);
      border-radius: 20px;
    }

    li {
      padding: 16px;
      border-bottom: 1px solid var(--border-light);
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
    }

    li:last-child {
      border-bottom: none;
    }

    li:hover {
      background-color: rgba(229, 9, 20, 0.05);
    }

    li.downloaded {
      background-color: var(--downloaded);
    }

    li input[type="checkbox"] {
      margin-right: 12px;
      width: 18px;
      height: 18px;
      accent-color: var(--primary);
    }

    .media-type {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-left: 8px;
      color: white;
    }

    .media-type.subtitle {
      background-color: var(--subtitle-color);
    }

    .media-type.video {
      background-color: var(--video-color);
    }

    .media-type.other {
      background-color: var(--other-color);
    }

    .resolution-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-left: 8px;
      color: white;
    }

    .resolution-badge.hd {
      background-color: var(--hd-color);
    }

    .resolution-badge.sd {
      background-color: var(--sd-color);
    }

    .resolution-badge.lq {
      background-color: var(--lq-color);
    }

    .resolution-selector {
      display: flex;
      gap: 5px;
      margin-left: auto;
    }

    .resolution-btn {
      padding: 2px 8px;
      font-size: 0.8rem;
      border-radius: 4px;
      background-color: var(--secondary);
      opacity: 0.7;
      cursor: pointer;
    }

    .resolution-btn:hover {
      opacity: 1;
      transform: translateY(-1px);
    }

    .resolution-btn.hd {
      background-color: var(--hd-color);
    }

    .resolution-btn.sd {
      background-color: var(--sd-color);
    }

    .resolution-btn.lq {
      background-color: var(--lq-color);
    }

    .resolution-btn.active {
      opacity: 1;
      transform: translateY(-1px);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1.5rem;
      gap: 10px;
      flex-wrap: wrap;
    }

    .download-btn {
      background: var(--primary);
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
    }

    .toggle-btn {
      background: var(--secondary);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .toggle-btn:hover {
      background: #043b63;
    }

    .progress {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: var(--text);
      text-align: center;
      height: 24px;
      transition: var(--transition);
    }

    .progress-bar {
      height: 6px;
      width: 100%;
      background-color: var(--border-light);
      border-radius: 3px;
      margin-top: 8px;
      overflow: hidden;
      display: none;
    }

    .progress-bar-fill {
      height: 100%;
      background-color: var(--primary);
      width: 0%;
      transition: width 0.3s ease;
    }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--success);
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }

    .selected-count {
      background: var(--secondary);
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.8rem;
      margin-left: 8px;
    }

    .range-container {
      display: flex;
      gap: 10px;
      margin-bottom: 1rem;
    }

    .download-settings {
      margin-top: 1rem;
      padding: 1rem;
      border: 1px solid var(--border-light);
      border-radius: 8px;
      transition: var(--transition);
    }

    .download-settings h3 {
      margin-bottom: 0.5rem;
      font-size: 1rem;
    }

    .setting-row {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .setting-row label {
      flex: 1;
    }

    .setting-row input[type="range"] {
      width: 150px;
    }

    .setting-value {
      width: 50px;
      text-align: right;
      margin-left: 10px;
    }

    .season-badge {
      background-color: var(--primary);
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.8rem;
      margin-left: 8px;
    }

    .chevron {
      transition: transform 0.3s ease;
    }

    .chevron.open {
      transform: rotate(180deg);
    }

    .tabs {
      display: flex;
      margin-bottom: 1.5rem;
      border-bottom: 2px solid var(--border-light);
    }

    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: var(--transition);
      font-weight: 600;
    }

    .tab.active {
      border-bottom-color: var(--primary);
      color: var(--primary);
    }

    .filter-controls {
      display: flex;
      gap: 10px;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 8px 12px;
      font-size: 0.85rem;
      background-color: var(--secondary);
      opacity: 0.7;
    }

    .filter-btn.active {
      opacity: 1;
      transform: translateY(-2px);
    }

    .filter-btn.subtitle {
      background-color: var(--subtitle-color);
    }

    .filter-btn.video {
      background-color: var(--video-color);
    }

    .filter-btn.other {
      background-color: var(--other-color);
    }

    .resolution-settings {
      margin-top: 1rem;
      padding: 1rem;
      border: 1px solid var(--border-light);
      border-radius: 8px;
      transition: var(--transition);
    }

    .resolution-settings h3 {
      margin-bottom: 0.5rem;
      font-size: 1rem;
    }

    .resolution-options {
      display: flex;
      gap: 10px;
      margin-top: 0.5rem;
    }

    .resolution-option {
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      transition: var(--transition);
      border: 2px solid transparent;
    }

    .resolution-option.active {
      border-color: var(--primary);
    }

    .resolution-option.hd {
      background-color: rgba(39, 174, 96, 0.1);
      color: var(--hd-color);
    }

    .resolution-option.sd {
      background-color: rgba(243, 156, 18, 0.1);
      color: var(--sd-color);
    }

    .resolution-option.lq {
      background-color: rgba(149, 165, 166, 0.1);
      color: var(--lq-color);
    }

    .preview-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .preview-container.active {
      opacity: 1;
      pointer-events: all;
    }

    .preview-content {
      max-width: 90%;
      max-height: 90%;
      background-color: var(--card-light);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .preview-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      background-color: var(--secondary);
      color: white;
    }

    .preview-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
    }

    .preview-body {
      padding: 16px;
      max-height: 70vh;
      overflow-y: auto;
    }

    .preview-video {
      width: 100%;
      max-height: 70vh;
    }

    .preview-subtitle {
      font-family: monospace;
      white-space: pre-wrap;
      padding: 16px;
      background-color: var(--bg-light);
      border-radius: 4px;
      max-height: 60vh;
      overflow-y: auto;
    }

    /* Dark mode styles */
    body.dark {
      background-color: var(--bg-dark);
      color: var(--text-light);
    }

    body.dark .container {
      background-color: var(--card-dark);
      box-shadow: var(--shadow-dark);
    }

    body.dark input[type=text] {
      background-color: #2b2b2b;
      border-color: var(--border-dark);
      color: var(--text-light);
    }

    body.dark .episode-list-container {
      border-color: var(--border-dark);
    }

    body.dark .season-content {
      border-color: var(--border-dark);
    }

    body.dark li {
      border-color: var(--border-dark);
    }

    body.dark li:hover {
      background-color: rgba(229, 9, 20, 0.15);
    }

    body.dark .progress-bar {
      background-color: #333;
    }

    body.dark .download-settings, 
    body.dark .resolution-settings {
      border-color: var(--border-dark);
    }

    body.dark .tabs {
      border-color: var(--border-dark);
    }

    body.dark .preview-content {
      background-color: var(--card-dark);
    }

    body.dark .preview-subtitle {
      background-color: #2b2b2b;
      color: var(--text-light);
    }

    /* Animation keyframes */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Responsive styles */
    @media (max-width: 768px) {
      .container {
        padding: 1.5rem;
      }

      .search-container, .range-container {
        flex-direction: column;
      }

      button {
        width: 100%;
      }

      .actions {
        flex-direction: column;
        gap: 1rem;
      }

      .toggle-btn, .download-btn {
        width: 100%;
      }

      .selection-controls, .filter-controls {
        flex-direction: column;
      }

      .resolution-options {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header>
      <h1 class="logo">
        <span class="logo-icon">üé¨</span>
        <span>Weak_Hero</span><span>Media</span>
      </h1>
    </header>

    <main>
      <div class="container">
        <h1>Download Weak_Hero Media</h1>
        
        <div class="tabs">
          <div class="tab active" data-tab="all">All Episodes</div>
          <div class="tab" data-tab="seasons">By Season</div>
        </div>
        
        <div class="search-container">
          <input type="text" id="searchInput" placeholder="Search episodes...">
        </div>
        
        <div class="range-container">
          <input type="text" id="rangeInput" placeholder="Enter range (e.g., S01E02-S01E05 or S02E07)">
          <button onclick="selectRange()">Select Range</button>
        </div>
        
        <div class="filter-controls">
          <button id="filterAll" class="filter-btn active" onclick="filterMedia('all')">All Media</button>
          <button id="filterSubtitle" class="filter-btn subtitle" onclick="filterMedia('subtitle')">Subtitles</button>
          <button id="filterVideo" class="filter-btn video" onclick="filterMedia('video')">Videos</button>
          <button id="filterOther" class="filter-btn other" onclick="filterMedia('other')">Other</button>
        </div>
        
        <div class="resolution-settings">
          <h3>Preferred Video Resolution</h3>
          <p>Select your preferred resolution for video downloads:</p>
          <div class="resolution-options">
            <div id="resHD" class="resolution-option hd active" onclick="setPreferredResolution('hd')">HD (720p+)</div>
            <div id="resSD" class="resolution-option sd" onclick="setPreferredResolution('sd')">SD (480p)</div>
            <div id="resLQ" class="resolution-option lq" onclick="setPreferredResolution('lq')">Low Quality</div>
          </div>
        </div>
        
        <div class="selection-controls">
          <button onclick="selectAll()">Select All</button>
          <button onclick="deselectAll()">Deselect All</button>
          <span id="selectedCount" class="selected-count">0 selected</span>
        </div>
        
        <div id="allEpisodesView">
          <div class="episode-list-container">
            <div class="episode-list-header">
              <span>All Episodes</span>
              <span id="episodeCount">32 Episodes</span>
            </div>
            <ul id="episodeList">
              <!-- Episodes will be populated here -->
            </ul>
          </div>
        </div>
        
        <div id="seasonsView" style="display: none;">
          <div id="seasonContainers">
            <!-- Season containers will be generated here -->
          </div>
        </div>
        
        <div class="download-settings">
          <h3>Download Settings</h3>
          <div class="setting-row">
            <label for="downloadDelay">Delay between downloads (ms):</label>
            <input type="range" id="downloadDelay" min="100" max="2000" step="100" value="500">
            <span id="delayValue" class="setting-value">500</span>
          </div>
        </div>
        
        <div class="progress">
          <span id="progressText"></span>
          <div class="progress-bar" id="progressBar">
            <div class="progress-bar-fill" id="progressBarFill"></div>
          </div>
        </div>
        
        <div class="actions">
          <button class="download-btn" onclick="downloadSelected()">
            <span>‚¨áÔ∏è</span>
            <span>Download Selected</span>
          </button>
          
          <button class="toggle-btn" onclick="toggleDarkMode()">
            <span id="themeIcon">üåô</span>
            <span id="themeText">Dark Mode</span>
          </button>
        </div>
      </div>
    </main>

    <div class="toast" id="toast">
      <span>‚úÖ</span>
      <span id="toastMessage"></span>
    </div>
    
    <div class="preview-container" id="previewContainer">
      <div class="preview-content">
        <div class="preview-header">
          <h3 id="previewTitle">Preview</h3>
          <button class="preview-close" onclick="closePreview()">√ó</button>
        </div>
        <div class="preview-body" id="previewBody">
          <!-- Preview content will be loaded here -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // Episode data structure
    const episodes = [
  {
    "season": 1,
    "episode": 1,
    "url": "https://cacdn.hakunaymatata.com/subtitle/15938e94da598afe8a0e7c3331d7496b.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDUyOTU4fX19XX0_&Signature=s49yK5DvtnG7Ujd1gTIWrYcu9reRJrQ7U-jAb8Xz4-CCxAj4ZOj0EZccsETioW0KKoZtlAzEbYIa2q4xyJ67FD1RgS9yGKy1U0BUJCChP6v6sWmk7q8Iz2X2xRf0NDnDlzD2SNdGebiYQEsgKW-dWx7JKUbfk-YFzlIvLcrIq8~yM2hi97sFknWw7CKYGujJbxqs2zeEqfLSMoBijnCiwt9e6U~FVVIj4-hqSB7j5e7wBLKsosXotYOqu14c4sk4SBty~t4Y4ug5ffhMzvwO-w9V7eef81qzgojlKBRfpV-gNX01utQrMidJtu5rc25OgyuxGe3EHXMvMqv~rPx5Xw__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E01.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 1,
    "episode": 1,
    "url": "https://vgorigin.hakunaymatata.com/bt/819e0f8ce5e991f81039b4bbccae8170.mp4?Expires=1747060075&KeyName=wefeed&Signature=riRj0pVxAbZZBJf3yJ2hwywEjBIWBC3H1DEGLOvph6Kl_U2iE7kvePXKU6vWRcTJiATuBxiBwmLhWhETfzdFCg",
    "fname": "Weak_Hero_S01E01_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 1,
    "episode": 2,
    "url": "https://cacdn.hakunaymatata.com/subtitle/92e99d77b6b7e26d56c2c602a9eee2c6.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDU1NTQ5fX19XX0_&Signature=25YPDbz63I2geupHfmAQvrkr0ZrfeOtZRYqLtNenSvZcCwMsl5W~xefK4en0Ip0KxFWe6tMYbXfEwI6vSILlwKcvzmRgc6WMHPQMgKfWBSWTcDiidhDjeu5nKOP4IA7WUjW67psIQ58LYX5QLUmQXeF20F7LdAuwFFPI0Vf3E4HrwtWMPpn9BRw7mQrCxVSpfp34QJkcDJ3XIOf8l8pkEYmDWOQM1N33TN5gnxTzm9VdzmrWFbt5xsMZD2gM~z3gxZcHb1uLk73Vt~vRCEEkqzgR1gf1pvuIqmjnryluydviunrxRYBLgw0RyAqodx9j1~GnANDktFzrXOwNhpozZw__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E02.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 1,
    "episode": 2,
    "url": "https://macdn.hakunaymatata.com/bt/0e9f50ab11190edf0837f54f0f51dd78.mp4?Expires=1747057121&Signature=alWdYTSGp7jr92esJgljMKcpAeKZqWR~Ctwy87KKoxxyzvDw~B5hWzd~v6kKcIBO1yUI6t3JAG7Xk--Ix2xnRSd~4ruZ8jKJ9cBTK4B3nkMtOVc34kowSdmnDHBDakj94vG6PRImRdkZuGzpWnggRlheKNFRcxZ9LIa-rAR6QqAdBK-nzlknzz76ukFf3wNL2AOumyIRQ7hfu-GzyQCCdL2~qumbwb5tkYzooN1Jat8xn6YUxwJLly9WCSqZQXqa6k9hVhEAO8zpOwp04yPL2kpIlUwVWLwit9YUs6ZP-N~yEDPBsoXiYQNb-AYZjlgZnn6WUinIvhs-Uz2mjXJCgQ__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E02_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 1,
    "episode": 3,
    "url": "https://cacdn.hakunaymatata.com/subtitle/8ff5767ae62f73aa2ce556da06d3dd46.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDUyNTA1fX19XX0_&Signature=qN6CcTiLCej3fg8vu~~2x~5itzVKLQTS1MVV6OTtrJVhjmP5KFQ1VnJxOK7SkDkBRhJg-ary~Nli1XzX0m9isC4hpZoXwzn08UUWoxjPpTcJ-rlYyy0dkyWiR3AYGgYenMZCcdDqGTPTdHtzUTLVNe0CxcbmaY-CK9OPUmG9k0EMaCZN-uW6I5Al12C-Pxl5leGPqCHnbvSrzhkonlzMNYciavw7CQ7FxMFdK0f61A~8hu-cO1wM0msLUvPz-HMNEWou5BsNwBxnKJpcDrtGyDpIy8i4TRZ2y-vKn652B66uESpeaeZ9i5056UtycCRqMcwOgVXEC6QJA0NrSTZrcg__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E03.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 1,
    "episode": 3,
    "url": "https://macdn.hakunaymatata.com/bt/663fd7e44c8a57cc8ffab68e8e4ddcfb.mp4?Expires=1747060401&Signature=0Q2sSxg0gv19qasQAtNI9Mw1IjiiOjB7nG8p7yrH~0vf0s61h6KkU1-dHObTgpJHJn~0yb9h1nkzSL137MXfVqhQADl1AtaNIYwlqEefdOZdyxvHWGKaXIU2dWR~0jhlXH4hPrnuuHa6idhctN7fgWreWghHnQqBucCYq0JCeOQoQgt98240rcZayqZdDm~k-M-CBsF12JyTEEUWzFLa9vI2uE1YX0WiZs6ZMJVQU3lGlwAOzjJlHhZXt-Bf4i8fz4AJlgQlIZr~ieW7XH235sNpMCMEXZ55VXyvAPM6VdgDMdgofltBdEpG9UD9P4lzFtD7gwbUnWD8peq1Vu6y1w__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E03_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 1,
    "episode": 4,
    "url": "https://cacdn.hakunaymatata.com/subtitle/9957b4c7d44fc22bd8df85b08c15d7cb.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDUzNjcyfX19XX0_&Signature=CQ23nTRfPb8EfHO73tktIH-BBZZkkzsdnOwP4VSGcCylPwn~~fdhXSLFB-SuXXrxenqPk3EuYR9Y3f~eMmb5Q-NP2Q0J~nX~3JwB4oZwn8kieBCJPRZOOqxehrRRb3oG2LwHfEVmRUMKYv-WH8VVNjifN5L16xitZSIuuSNh7-Sqa~qugOd25Wzc96VZIGuOAHn5HeW2XTa-nToeZ31LfIG4lkkebawllij7TsbdWo4xIQPuUxzv95-U7SglalXfJlWfB6v2GuxRV~k1mCz6XU0M2IL1tmyF-LM1X08FsZWzBDnhxa9C1oWiPzO2RJc4qmChrOQaGtXf9XkTVp6f0g__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E04.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 1,
    "episode": 4,
    "url": "https://macdn.hakunaymatata.com/bt/cf7bca3959f821bf1360fb10ddf73880.mp4?Expires=1747058220&Signature=fwjak-zUx3NnHLUWyqPhrIMgezZ0LPAsTzmfYHF2aQTnClqr2F3O0TfpoJ6DL3N0yB77W4JmppriLQkr86xAxav23fRgY-hj57wAhxXnCWmsv3~8PnmEDqNOSaMA4l4lUlQyz2BRPrwXgR~rKWpmEPigGRPmfajzuZ4zAAOtzySRZC7mbO2h1a6VYb3mJRz68Q6NvubSY8q9CbY7v9Ocvi3oiPkeh2Ngp-KVvPx~NQpQUd6mRHtZlaOY2w1eLuWulnxS0B4ZrYxFJ8Xi8bjiL62RiO1ockqdgmVzl2nTowCRfFfir1m~QA3sunlQ6Dexdw42twOiMOZeKe8n7nmz7A__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E04_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 1,
    "episode": 5,
    "url": "https://cacdn.hakunaymatata.com/subtitle/48a0b5766d35ffd1aba98f8e8f6f9676.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDUzNjcyfX19XX0_&Signature=CQ23nTRfPb8EfHO73tktIH-BBZZkkzsdnOwP4VSGcCylPwn~~fdhXSLFB-SuXXrxenqPk3EuYR9Y3f~eMmb5Q-NP2Q0J~nX~3JwB4oZwn8kieBCJPRZOOqxehrRRb3oG2LwHfEVmRUMKYv-WH8VVNjifN5L16xitZSIuuSNh7-Sqa~qugOd25Wzc96VZIGuOAHn5HeW2XTa-nToeZ31LfIG4lkkebawllij7TsbdWo4xIQPuUxzv95-U7SglalXfJlWfB6v2GuxRV~k1mCz6XU0M2IL1tmyF-LM1X08FsZWzBDnhxa9C1oWiPzO2RJc4qmChrOQaGtXf9XkTVp6f0g__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E05.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 1,
    "episode": 5,
    "url": "https://macdn.hakunaymatata.com/bt/32c6e577684fc877385b8bffc2b6124e.mp4?Expires=1747057896&Signature=cxalJwstazV~EZCYeT20ERRHnTnZrM~PwN6I-0BfRZABohlB7a-NsRd2Sj2rI~gQRtltp9MFSCLZ~MX2C0B7~ORwgv2D5DP5wRCH0CzQ2y5wIEao54e00XfyWwTMJQTBHVmjIPhPoRz5poogXYMioC1qiE95iP26VwaBXLFpcUzIAhDYfZhcMqsOhqFvhc~7ay9VcyIUY~G8wFC2wZb757B1Ys0sn5cpSp96yKhe0McrCrgJJ0nTWMJhCZKTSrXLBJXv5wkb6EawM5BU6bIZ5XseQ1FCwzgptG7gUdF4pxaFDFekcbOHPnKbtqI8R7ruadamjEzvhBAcYIk9Z5GM8g__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E05_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 1,
    "episode": 6,
    "url": "https://cacdn.hakunaymatata.com/subtitle/98383bb24a5b29dcef40f139ee89ad0d.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDU1NTM3fX19XX0_&Signature=rCNg0n3G~ZWrSjB0BF-tTY4J7ER7UX0RljDzJ72-HE~KIlcgmZJDrvkdsMfAOB7rxzch022Ts97uoaYckZehNMzIng49qXEqAylIQISFuKzc8uJeP2FYwuOBIWVUAbZTSMUFCNy577YQc0cLTm~io4-OVLJlwXmVyLmaIIvq-ZgFPylVAy1wYxNIvoyFdmvfMRYxJrvCNBGOQzC8e52I1N798K4S3DftZ2nKUksYy61n6V9DPNUc-rnzgh1CLcfauHoulmiSe8e~j9URv~E3tdYbDKpNsj0Z7VQs9pmYd5r6t~RKhqDkCnhKFFGWuwlthMc7ZI3qv~32TBxUGT4mNQ__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E06.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 1,
    "episode": 6,
    "url": "https://vgorigin.hakunaymatata.com/bt/4a8d274b89703c77e8364b758f601110.mp4?Expires=1747056870&KeyName=wefeed&Signature=BxvMmQ-4ZScuQCPX3yYO2S18dz96lfa9nmdNMvx4iuph7fo8LVKImRUidvHyEZZfxA0hJffcy2PQkh9zaa6oBw",
    "fname": "Weak_Hero_S01E06_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 1,
    "episode": 7,
    "url": "https://cacdn.hakunaymatata.com/subtitle/dd8168e29cfb6868aa8f2921f1990e59.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDUyOTU4fX19XX0_&Signature=s49yK5DvtnG7Ujd1gTIWrYcu9reRJrQ7U-jAb8Xz4-CCxAj4ZOj0EZccsETioW0KKoZtlAzEbYIa2q4xyJ67FD1RgS9yGKy1U0BUJCChP6v6sWmk7q8Iz2X2xRf0NDnDlzD2SNdGebiYQEsgKW-dWx7JKUbfk-YFzlIvLcrIq8~yM2hi97sFknWw7CKYGujJbxqs2zeEqfLSMoBijnCiwt9e6U~FVVIj4-hqSB7j5e7wBLKsosXotYOqu14c4sk4SBty~t4Y4ug5ffhMzvwO-w9V7eef81qzgojlKBRfpV-gNX01utQrMidJtu5rc25OgyuxGe3EHXMvMqv~rPx5Xw__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E07.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 1,
    "episode": 7,
    "url": "https://macdn.hakunaymatata.com/bt/f264394cc4023e3e5668bdba9687a3d3.mp4?Expires=1747059102&Signature=T1gTH8U5oVqon4Sy-bmIitzd9Kc7GXO3cc3K15ZK-ysHJJd2TKaO6hmiq1qv45vem9PzLM0CapHXiLAPa44hFO-NvXDbillgoms4czmOG9guKMq7mPFe5o8Y9QSGNxfYJlg4jPKSc5dRq85D01mZWX2hquO-GQ5JMTfQyRwu9VGpyX8OzL1xQjLrNZjWZbery~dkXJQiA3J0t4fNmZ6ZVqfb560BVk-M-6xXhuXoUvGebYHjrWYbKg3Gx2HQwmsnvKcKBEuueJWfMBpnWUlfxw7n96mDoQty3bhir0jqyiUHyLZMHoJoJGispYXenXUX0xqoAroZzJknYdhkSM9K8A__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E07_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 1,
    "episode": 8,
    "url": "https://cacdn.hakunaymatata.com/subtitle/729fdcb49d848d97931f0f1d1fa6e57b.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDU1NTM3fX19XX0_&Signature=rCNg0n3G~ZWrSjB0BF-tTY4J7ER7UX0RljDzJ72-HE~KIlcgmZJDrvkdsMfAOB7rxzch022Ts97uoaYckZehNMzIng49qXEqAylIQISFuKzc8uJeP2FYwuOBIWVUAbZTSMUFCNy577YQc0cLTm~io4-OVLJlwXmVyLmaIIvq-ZgFPylVAy1wYxNIvoyFdmvfMRYxJrvCNBGOQzC8e52I1N798K4S3DftZ2nKUksYy61n6V9DPNUc-rnzgh1CLcfauHoulmiSe8e~j9URv~E3tdYbDKpNsj0Z7VQs9pmYd5r6t~RKhqDkCnhKFFGWuwlthMc7ZI3qv~32TBxUGT4mNQ__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E08.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 1,
    "episode": 8,
    "url": "https://macdn.hakunaymatata.com/bt/8cabfdcef5d9cb0fe38d4ed5c6aa5708.mp4?Expires=1747056943&Signature=QdYbSj5jmWkRBTgY5GUsIx84Da9wNCyK16NbhgkwGHXsP7Xd6UjPMqep9JAN-V7OKoaSAFqPUGHx6EuTUTurPLM~5FQ9B1dkEkrRY1NDUzZjVTPspelRCOVV~WxoUU5Egi~DeOcrn0UJ9Qk2fiZQesgmsE1pAtNum491rStJSD79VLNeiVZQLRenIE9pdM3qtGvNiY0w9YA6QpwsqkWJ~iLhk4qn~GOnYMEVLOww-aQ~SNgaOStbvReuk09F4HpJSWfAQr-kVZsL6rV7p5Ik087YYtMut9ar5-wev3ujbZK20-qtxAXVI1XrnuxqYeguyj6wHHw4R-uTxnWXB5HKbw__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S01E08_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 2,
    "episode": 1,
    "url": "https://cacdn.hakunaymatata.com/subtitle/530b0bc9df3ea6452b014b2ae02a84a1.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDU1NTQ5fX19XX0_&Signature=25YPDbz63I2geupHfmAQvrkr0ZrfeOtZRYqLtNenSvZcCwMsl5W~xefK4en0Ip0KxFWe6tMYbXfEwI6vSILlwKcvzmRgc6WMHPQMgKfWBSWTcDiidhDjeu5nKOP4IA7WUjW67psIQ58LYX5QLUmQXeF20F7LdAuwFFPI0Vf3E4HrwtWMPpn9BRw7mQrCxVSpfp34QJkcDJ3XIOf8l8pkEYmDWOQM1N33TN5gnxTzm9VdzmrWFbt5xsMZD2gM~z3gxZcHb1uLk73Vt~vRCEEkqzgR1gf1pvuIqmjnryluydviunrxRYBLgw0RyAqodx9j1~GnANDktFzrXOwNhpozZw__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E01.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 2,
    "episode": 1,
    "url": "https://macdn.hakunaymatata.com/bt/45f52e0f0a3223b2cdb97cd5a99a53ee.mp4?Expires=1747059626&Signature=UcXUpuQis2tWjfaFoqQ97JwrWuXQTI83C7RMnKP496U4JnIr9ksYJymVsYTXcET3khPRrT84aSq280q1UAHQZgHxWkK2AtYm4nOnouc83wkrjxngMDefS2DH~2dwux6wXS1zkmgaR6O8ZW1RuGHSsOkE3gg3y4J5on-NHZsTr6K-mg6G13isUYyF8zYfUpBF-QfMPC-WbDM86ExljkfPv5TuETOygqLDbT1ckxJRgDm9i-LmAgsijMOUgPpt~k8k-0NoPuaVV~f8AF3Kz6cWbijbB~XcGnKfqTykfo1OwFy~s7yKLRi4iksY594--CMggkEePKLBkw~yoMEmFK~Nbg__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E01_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 2,
    "episode": 2,
    "url": "https://cacdn.hakunaymatata.com/subtitle/0bd130e9b4ba592169bb22b810c45755.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDUyOTU4fX19XX0_&Signature=s49yK5DvtnG7Ujd1gTIWrYcu9reRJrQ7U-jAb8Xz4-CCxAj4ZOj0EZccsETioW0KKoZtlAzEbYIa2q4xyJ67FD1RgS9yGKy1U0BUJCChP6v6sWmk7q8Iz2X2xRf0NDnDlzD2SNdGebiYQEsgKW-dWx7JKUbfk-YFzlIvLcrIq8~yM2hi97sFknWw7CKYGujJbxqs2zeEqfLSMoBijnCiwt9e6U~FVVIj4-hqSB7j5e7wBLKsosXotYOqu14c4sk4SBty~t4Y4ug5ffhMzvwO-w9V7eef81qzgojlKBRfpV-gNX01utQrMidJtu5rc25OgyuxGe3EHXMvMqv~rPx5Xw__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E02.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 2,
    "episode": 2,
    "url": "https://macdn.hakunaymatata.com/bt/abe98e521669ac778c845ca2b9a30127.mp4?Expires=1747060452&Signature=sWrx3t4bIKsT1YYcKJG3cosB~VSNILTRpxceKfImhXQxo~TIXs3aZ10cl-qUzmakuMCLJuZs5-EIeFTfMIIIxfi0c75L3HbzSZWfLnUm9lJELVocOzBt7QKUNLYioozBNZQRALo9mSBI9Z2ZkEwasXDQgbesC0NDwaMpeiCTVcVt8AWI5y7-3KhST5bDC~BfLggAsfWdfXhM-Whyr1~PPXX1V24jflP~NSQAcpRVjJLQhAhj-h9uxcMCL5J6-Ir5cGtUuur~39ibs7tQ0IFOCS6cCCczAB1sI2NL23Ql8ys50WbDK6mkw7Hl1Q15SrXG29VeJUTrF3q5MIiV1pBpKw__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E02_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 2,
    "episode": 3,
    "url": "https://cacdn.hakunaymatata.com/subtitle/5bc290a7af96def6d281303d8b34da06.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDUzNjcyfX19XX0_&Signature=CQ23nTRfPb8EfHO73tktIH-BBZZkkzsdnOwP4VSGcCylPwn~~fdhXSLFB-SuXXrxenqPk3EuYR9Y3f~eMmb5Q-NP2Q0J~nX~3JwB4oZwn8kieBCJPRZOOqxehrRRb3oG2LwHfEVmRUMKYv-WH8VVNjifN5L16xitZSIuuSNh7-Sqa~qugOd25Wzc96VZIGuOAHn5HeW2XTa-nToeZ31LfIG4lkkebawllij7TsbdWo4xIQPuUxzv95-U7SglalXfJlWfB6v2GuxRV~k1mCz6XU0M2IL1tmyF-LM1X08FsZWzBDnhxa9C1oWiPzO2RJc4qmChrOQaGtXf9XkTVp6f0g__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E03.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 2,
    "episode": 3,
    "url": "https://macdn.hakunaymatata.com/bt/1ff9450d5c84342886dd7fbd99d456db.mp4?Expires=1747060108&Signature=zz~Opw4lObz3dAzGULHUO6PJDJKDiWAljS5s9vxMHbK1htkbfWn0IW3IKjsxdWM~aD9ehZfX7RBYmMtjYPZvrxOLcJPf0v~t1-bqFEnM3DWnsX4L2TAj8RDvEJ6I1bBE489V3heD8iTrcOPzNdJ0Dqi0KfxriHIxAT5HLeNEnzRIFAiNhvSlxGnO3Z7CBGwZZZNSC08umxzTNsJujUwQmL29bKAKgRDP5jZhH6Kq1hPX2yNu0p6QR81sJK9-1p-w2zExF3RsXJNunKSAV1R0cdW5rTzpuEibMGQKQtLdRO4DHTNowCFIC4eRHLZyMt1HnXjXHylyIJP9f4JoGuFgjA__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E03_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 2,
    "episode": 4,
    "url": "https://cacdn.hakunaymatata.com/subtitle/637b73dc5a08f07fd8fcc784f6b0ce8e.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDUzNjcyfX19XX0_&Signature=CQ23nTRfPb8EfHO73tktIH-BBZZkkzsdnOwP4VSGcCylPwn~~fdhXSLFB-SuXXrxenqPk3EuYR9Y3f~eMmb5Q-NP2Q0J~nX~3JwB4oZwn8kieBCJPRZOOqxehrRRb3oG2LwHfEVmRUMKYv-WH8VVNjifN5L16xitZSIuuSNh7-Sqa~qugOd25Wzc96VZIGuOAHn5HeW2XTa-nToeZ31LfIG4lkkebawllij7TsbdWo4xIQPuUxzv95-U7SglalXfJlWfB6v2GuxRV~k1mCz6XU0M2IL1tmyF-LM1X08FsZWzBDnhxa9C1oWiPzO2RJc4qmChrOQaGtXf9XkTVp6f0g__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E04.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 2,
    "episode": 4,
    "url": "https://macdn.hakunaymatata.com/bt/65876b22a1eb1dce2bbb2dcde368af58.mp4?Expires=1747059243&Signature=qWDTt6JWezHZuA4bXjMzFcvCpnm2awsCrwEnYCOiWqR2ZB~qXtjFzMpV0FCkvjLaNcShwr~hEue8Dye3DsGOC3sU-kPosyLjzqJHaZsz9UEwH5s1mdQHZrH~0xrlcCWXdtt~HBBLVl03ONr2VTs3wQga3hxFgrHecFM4~Mn9HRMQlDzC5j-DQQo6z8zvI97jXylGXp9ifBOPalHmz0FFrgwRaeV4gBCtjR5hcF7Jr8rCWPDL2rzonnEQY1X0O6zGQVaWwOXAkMJZAGMJ4P0n8xcdT2NURl7xpKTF-uZLlQJfY6wJd-MeJvdGi4PGt4TWsuFC-Uf-6ckGYNVFZ~FoPA__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E04_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 2,
    "episode": 5,
    "url": "https://cacdn.hakunaymatata.com/subtitle/5d9840cc9acae850ff97487a5e60fc50.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDU1NDA5fX19XX0_&Signature=mUo7cxKfYjjbU0bamBWnCJJZBj9l4lYl1kZv2reH7fa~cqXU3jbJuf8pn2NS0AGNYAAKzLXZ7817bt74KzHDq0cPLOJjgLoO~Qe2Iv~IvqIXRl~8KLa5Dr4F3oGscipNX~AcUFH4AwIWbAWdMSqYFTO125Jmj5qOnoWqRhxqMdtTorrvk~vq7Y0oqh5BYqFi~dIuXhvOkzZ3ArAYshXeRXOOQaa1hMj8v~cfEJv-HR5pZ4H8DzVdBPQtwtX97P3Tl9wSKUIyAJSpT6ytDuR-9XBmehFNSrldXewaqtTLFQA1rtMRXOP9oPNskvu9lWGGi7Jabo4T5u87x6~Cez-F3w__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E05.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 2,
    "episode": 5,
    "url": "https://macdn.hakunaymatata.com/bt/d7d4f2a5276c9c73a670a54430234ff6.mp4?Expires=1747057806&Signature=SZUkQ3Ve8Xtvqu-4toGqEVzik1v4B99rFe4FNWNrUHvWUxTNqpd87XhG~47chgqy~E8SlB~WgFHCDqFciSkqIS0fFV6bOZ1tJjvnGdPn74xyigSvGxQ2RCNBQvSFeNAapKR3f8QuDbq0boDO4FKydPcWgkSl3vlB6Nw1gr1oraOp04EuGvWgHR2280jy9MosSt~Y5uR0Lw8Y2aEbA3tP1BJgX~92gi0zTaN8d~kJ8pBsBgjjVxOc77l5DLWTvtDapkYkv~SQUGGpCzBV8EiFJS8--WBMGnazCp4Oq33xLeeOdK705RhUNytb-NQU561iiEJ3R9XEPGze~VEs3~yaqA__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E05_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 2,
    "episode": 6,
    "url": "https://cacdn.hakunaymatata.com/subtitle/3f1ad573b366edbf8c67a38686c180e6.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDU1NTQ5fX19XX0_&Signature=25YPDbz63I2geupHfmAQvrkr0ZrfeOtZRYqLtNenSvZcCwMsl5W~xefK4en0Ip0KxFWe6tMYbXfEwI6vSILlwKcvzmRgc6WMHPQMgKfWBSWTcDiidhDjeu5nKOP4IA7WUjW67psIQ58LYX5QLUmQXeF20F7LdAuwFFPI0Vf3E4HrwtWMPpn9BRw7mQrCxVSpfp34QJkcDJ3XIOf8l8pkEYmDWOQM1N33TN5gnxTzm9VdzmrWFbt5xsMZD2gM~z3gxZcHb1uLk73Vt~vRCEEkqzgR1gf1pvuIqmjnryluydviunrxRYBLgw0RyAqodx9j1~GnANDktFzrXOwNhpozZw__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E06.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 2,
    "episode": 6,
    "url": "https://macdn.hakunaymatata.com/bt/317fa4d85b562f3ba333aaba6514a933.mp4?Expires=1747059206&Signature=0nTNlYgY5vxGao-OFJbS8EVYPolgrPmMJqX6a1SpHT2FjC2UsgZCJh8YF73FHJPKJFxjkf2YFRMBZcM4aMloif2cllhyS427vrQQ3FNqNY0HBcTeQNeP4nZQWCjIprhewFDXQ8wTqgB73DuxKVAJXogifjv4G7kgpkc~a14IMWu1EZp63Kmw3FqPxj2POCiYdsRO8uYC~GW~IYCvkbWkLBlCQ4DBOs8wTRH9DbfJENBzxBbv75FotJLRHENSSh-8WOaoMotuvVJQ2GV9CafadUryZFsl6pcT5~A5MD5oYFgjUXVYEqc7YlhCgqT-NT8ONxEfcUG899cF3JSpTpA93g__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E06_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 2,
    "episode": 7,
    "url": "https://cacdn.hakunaymatata.com/subtitle/a19134c3988ea7d784162b2ead5ff406.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDUzNjcyfX19XX0_&Signature=CQ23nTRfPb8EfHO73tktIH-BBZZkkzsdnOwP4VSGcCylPwn~~fdhXSLFB-SuXXrxenqPk3EuYR9Y3f~eMmb5Q-NP2Q0J~nX~3JwB4oZwn8kieBCJPRZOOqxehrRRb3oG2LwHfEVmRUMKYv-WH8VVNjifN5L16xitZSIuuSNh7-Sqa~qugOd25Wzc96VZIGuOAHn5HeW2XTa-nToeZ31LfIG4lkkebawllij7TsbdWo4xIQPuUxzv95-U7SglalXfJlWfB6v2GuxRV~k1mCz6XU0M2IL1tmyF-LM1X08FsZWzBDnhxa9C1oWiPzO2RJc4qmChrOQaGtXf9XkTVp6f0g__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E07.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 2,
    "episode": 7,
    "url": "https://macdn.hakunaymatata.com/bt/03278b33570451ff92d4c4df74157972.mp4?Expires=1747058802&Signature=2E2z-bk1CHsJIam8JBYI3sgpc3fzaaav2Xmbrc3JvBo5ZpNA3xTBGR7GJX3wDtjzjC7u2PBAoEfwDlYdf0xBxkppj1Ce0PlJAqSyqSKH-aOt5GxRXFRmGxXqWenR3mT4TH9GfMWyMpRGSP4sgzHQI5fs9FxCTeBlFm2ujrFJg~Wq2USEUom6lxypiq~CHrFZfRp9ztbWTzUgaPRdlOriD0dWwsfEfT1XOR9RtQmklYsiwu9w538ohimDQEUMKTMXaP98r4VxHh8L9W3CGgmk9uJrVJ3xBbMGK8jAfJYfrgJ62wGva22I2nEwu9h3GWuVyjTJhpkk4oT~HbHbuCm53g__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E07_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  },
  {
    "season": 2,
    "episode": 8,
    "url": "https://cacdn.hakunaymatata.com/subtitle/5eb432edf836900d2547de2905a6a068.srt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jYWNkbi5oYWt1bmF5bWF0YXRhLmNvbS9zdWJ0aXRsZS8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzQ2NDU2MTA1fX19XX0_&Signature=wPbRBYdSQS7-OYjEJ6gtbbhnWmJjUSVLvNTjeefHgY6UJ5wnmytfzsYDSbXeCXYfilwEb737ZVt-dRQH8pdkMgJGf-dYG8~3rhsvKMty4EXZDqDEqhMgpy79bbf~j5lZbGBrSgRTAMnrRGeCVO-16wnfusNpqTjOQ7JLFzz2nwsPFG~CoPtvPzj7kQQ-1yVHFdBYAraXo7Ph0ideRXxqlR5quF7BtsNafRZRysRHpvCyBwRpljdv2H~7vRJx29H4urf7WCKGMSHIF9kQAM1ySswy3SOkVfmX-lZsUhzLl4ubSkSpx0q5jAEMv85ZyDanFW6Z3CqppQ0ghOIkmqgv0Q__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E08.srt",
    "mediaType": "subtitle",
    "resolution": null
  },
  {
    "season": 2,
    "episode": 8,
    "url": "https://macdn.hakunaymatata.com/bt/46976f397fae3c59a7aee4788fbae022.mp4?Expires=1747061014&Signature=1dbGswyMA7oKHoAYrnPmUJtY4GSdDei3F0ZrSm3ghfWshOEn6ww24YAsEJDj3j1L1ibnMns-aym4xEWP0yxJr0uwvpFaw2uD03oVTazBh8fvyXGLPdAXEN5oQIeXKKyPd6SKxiTuLDbvbw6hqyuVLrcLoQmDje4SAq-bI1Twpn~NO9wNkTqyruBuDifNSkf~cmCTdLVkVbRAq7VcnZrw6wVOp0XxuR1sAbiP9P~zu~sK3~gKYePW1qMPloAHwor5QqCp1us869vw5tGdu8yGP7GxhM-PJPUg25-Rgp4m6fC7DbuqCypi7w0MdLJCjhXmh5X5Z0-sHsz3JiO66yKdUg__&Key-Pair-Id=KMHN1LQ1HEUPL",
    "fname": "Weak_Hero_S02E08_480p.mp4",
    "mediaType": "video",
    "resolution": "480p"
  }
];
    
    // User preferences
    const userPrefs = {
      preferredResolution: 'hd', // Default to HD
      darkMode: false,
      downloadDelay: 500
    };
    
    // Resolution mapping
    const resolutionMap = {
      '1080p': 'hd',
      '720p': 'hd',
      '480p': 'sd',
      '360p': 'lq',
      '240p': 'lq'
    };
    
    // Load saved preferences
    function loadPreferences() {
      const savedPrefs = localStorage.getItem('mediaDownloaderPrefs');
      if (savedPrefs) {
        const prefs = JSON.parse(savedPrefs);
        userPrefs.preferredResolution = prefs.preferredResolution || 'hd';
        userPrefs.darkMode = prefs.darkMode || false;
        userPrefs.downloadDelay = prefs.downloadDelay || 500;
        
        // Apply preferences
        document.getElementById('downloadDelay').value = userPrefs.downloadDelay;
        document.getElementById('delayValue').textContent = userPrefs.downloadDelay;
        
        if (userPrefs.darkMode) {
          document.body.classList.add('dark');
          document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
          document.getElementById('themeText').textContent = 'Light Mode';
        }
        
        // Set resolution option
        document.querySelectorAll('.resolution-option').forEach(opt => {
          opt.classList.remove('active');
        });
        document.getElementById(`res${userPrefs.preferredResolution.toUpperCase()}`).classList.add('active');
      }
    }
    
    // Save preferences
    function savePreferences() {
      localStorage.setItem('mediaDownloaderPrefs', JSON.stringify(userPrefs));
    }
    
    // Set preferred resolution
    function setPreferredResolution(resolution) {
      userPrefs.preferredResolution = resolution;
      
      // Update UI
      document.querySelectorAll('.resolution-option').forEach(opt => {
        opt.classList.remove('active');
      });
      document.getElementById(`res${resolution.toUpperCase()}`).classList.add('active');
      
      savePreferences();
      showToast(`Preferred resolution set to ${resolution.toUpperCase()}`);
    }

    // Determine media type from URL or filename
    function getMediaType(url, filename) {
      const lowerUrl = url.toLowerCase();
      const lowerFilename = filename.toLowerCase();
      
      if (lowerUrl.includes('.srt') || lowerUrl.includes('.vtt') || 
          lowerFilename.endsWith('.srt') || lowerFilename.endsWith('.vtt') ||
          lowerUrl.includes('/subtitle/')) {
        return 'subtitle';
      } else if (lowerUrl.includes('.mp4') || lowerUrl.includes('.mkv') || lowerUrl.includes('.avi') ||
                lowerFilename.endsWith('.mp4') || lowerFilename.endsWith('.mkv') || lowerFilename.endsWith('.avi') ||
                lowerUrl.includes('video')) {
        return 'video';
      } else {
        return 'other';
      }
    }
    
    // Determine resolution from URL or filename
    function getResolution(url, filename) {
      const lowerUrl = url.toLowerCase();
      const lowerFilename = filename.toLowerCase();
      
      // Check for common resolution indicators
      if (lowerUrl.includes('1080p') || lowerFilename.includes('1080p')) {
        return '1080p';
      } else if (lowerUrl.includes('720p') || lowerFilename.includes('720p')) {
        return '720p';
      } else if (lowerUrl.includes('480p') || lowerFilename.includes('480p')) {
        return '480p';
      } else if (lowerUrl.includes('360p') || lowerFilename.includes('360p')) {
        return '360p';
      } else if (lowerUrl.includes('240p') || lowerFilename.includes('240p')) {
        return '240p';
      }
      
      // Default to SD if no resolution found
      return '480p';
    }

    // Get icon for media type
    function getMediaIcon(type) {
      switch(type) {
        case 'subtitle': return 'üìù';
        case 'video': return 'üé¨';
        default: return 'üìÑ';
      }
    }

    // Group episodes by season
    function groupBySeason() {
      const seasons = {};
      episodes.forEach(ep => {
        if (!seasons[ep.season]) {
          seasons[ep.season] = [];
        }
        seasons[ep.season].push(ep);
      });
      return seasons;
    }

    // Populate episode list
    function populateEpisodeList() {
      const allList = document.getElementById('episodeList');
      const seasonContainers = document.getElementById('seasonContainers');
      const count = document.getElementById('episodeCount');
      
      // Clear existing lists
      allList.innerHTML = '';
      seasonContainers.innerHTML = '';
      
      // Group episodes by season
      const seasons = groupBySeason();
      
      // Add all episodes to the main list
      episodes.forEach(ep => {
        const mediaType = getMediaType(ep.url, ep.fname);
        const mediaIcon = getMediaIcon(mediaType);
        const resolution = mediaType === 'video' ? getResolution(ep.url, ep.fname) : null;
        const resolutionClass = resolution ? resolutionMap[resolution] : '';
        
        const li = document.createElement('li');
        li.className = `media-item ${mediaType}`;
        li.dataset.resolution = resolution || '';
        
        let resolutionBadge = '';
        if (resolution) {
          resolutionBadge = `<span class="resolution-badge ${resolutionClass}">${resolution}</span>`;
        }
        
        li.innerHTML = `
          <input type="checkbox" class="epCb" id="s${ep.season}e${ep.episode}" 
                 value="${ep.url}" data-fname="${ep.fname}" 
                 data-season="${ep.season}" data-episode="${ep.episode}"
                 data-media-type="${mediaType}" data-resolution="${resolution || ''}">
          <label for="s${ep.season}e${ep.episode}">
            ${mediaIcon} S${ep.season.toString().padStart(2, '0')}E${ep.episode.toString().padStart(2, '0')}: ${ep.fname}
            <span class="media-type ${mediaType}">${mediaType}</span>
            ${resolutionBadge}
          </label>
          <div class="resolution-selector">
            ${mediaType === 'video' ? `
              <button class="preview-btn" onclick="previewMedia('${ep.url}', '${mediaType}', 'S${ep.season}E${ep.episode}')">üëÅÔ∏è Preview</button>
            ` : mediaType === 'subtitle' ? `
              <button class="preview-btn" onclick="previewMedia('${ep.url}', '${mediaType}', 'S${ep.season}E${ep.episode}')">üëÅÔ∏è Preview</button>
            ` : ''}
          </div>
        `;
        allList.appendChild(li);
      });
      
      // Create season containers
      Object.keys(seasons).sort((a, b) => parseInt(a) - parseInt(b)).forEach(season => {
        const seasonEps = seasons[season];
        const seasonDiv = document.createElement('div');
        seasonDiv.className = 'season-container';
        seasonDiv.innerHTML = `
          <div class="season-header" onclick="toggleSeason(${season})">
            <h2>Season ${season} <span class="season-badge">${seasonEps.length} Episodes</span></h2>
            <span class="chevron">‚ñº</span>
          </div>
          <div class="season-content" id="season${season}Content">
            <div class="selection-controls" style="padding: 10px;">
              <button onclick="selectSeason(${season})">Select All Season ${season}</button>
              <button onclick="deselectSeason(${season})">Deselect Season ${season}</button>
            </div>
            <ul id="season${season}List">
              ${seasonEps.map(ep => {
                const mediaType = getMediaType(ep.url, ep.fname);
                const mediaIcon = getMediaIcon(mediaType);
                const resolution = mediaType === 'video' ? getResolution(ep.url, ep.fname) : null;
                const resolutionClass = resolution ? resolutionMap[resolution] : '';
                
                let resolutionBadge = '';
                if (resolution) {
                  resolutionBadge = `<span class="resolution-badge ${resolutionClass}">${resolution}</span>`;
                }
                
                return `
                  <li class="media-item ${mediaType}" data-resolution="${resolution || ''}">
                    <input type="checkbox" class="epCb seasonEp${season}" id="season${season}ep${ep.episode}" 
                           value="${ep.url}" data-fname="${ep.fname}"
                           data-season="${ep.season}" data-episode="${ep.episode}"
                           data-media-type="${mediaType}" data-resolution="${resolution || ''}">
                    <label for="season${season}ep${ep.episode}">
                      ${mediaIcon} Episode ${ep.episode}: ${ep.fname}
                      <span class="media-type ${mediaType}">${mediaType}</span>
                      ${resolutionBadge}
                    </label>
                    <div class="resolution-selector">
                      ${mediaType === 'video' ? `
                        <button class="preview-btn" onclick="previewMedia('${ep.url}', '${mediaType}', 'S${season}E${ep.episode}')">üëÅÔ∏è Preview</button>
                      ` : mediaType === 'subtitle' ? `
                        <button class="preview-btn" onclick="previewMedia('${ep.url}', '${mediaType}', 'S${season}E${ep.episode}')">üëÅÔ∏è Preview</button>
                      ` : ''}
                    </div>
                  </li>
                `;
              }).join('')}
            </ul>
          </div>
        `;
        seasonContainers.appendChild(seasonDiv);
      });
      
      // Update count
      count.textContent = `${episodes.length} Episodes`;
      
      // Add event listeners to checkboxes
      document.querySelectorAll('.epCb').forEach(checkbox => {
        checkbox.addEventListener('change', function() {
          // Sync checkboxes between views
          const season = this.dataset.season;
          const episode = this.dataset.episode;
          const isChecked = this.checked;
          
          // Find and update the corresponding checkbox in the other view
          if (this.id.startsWith('s')) {
            // Main list checkbox changed, update season view
            const seasonCheckbox = document.getElementById(`season${season}ep${episode}`);
            if (seasonCheckbox) seasonCheckbox.checked = isChecked;
          } else {
            // Season view checkbox changed, update main list
            const mainCheckbox = document.getElementById(`s${season}e${episode}`);
            if (mainCheckbox) mainCheckbox.checked = isChecked;
          }
          
          updateSelectedCount();
        });
      });
      
      updateSelectedCount();
    }

    // Preview media
    async function previewMedia(url, mediaType, title) {
      const previewContainer = document.getElementById('previewContainer');
      const previewTitle = document.getElementById('previewTitle');
      const previewBody = document.getElementById('previewBody');
      
      previewTitle.textContent = `Preview: ${title}`;
      previewBody.innerHTML = '<div style="text-align: center; padding: 20px;">Loading preview...</div>';
      
      previewContainer.classList.add('active');
      
      try {
        if (mediaType === 'video') {
          // Video preview
          previewBody.innerHTML = `
            <video class="preview-video" controls>
              <source src="${url}" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          `;
        } else if (mediaType === 'subtitle') {
          // Subtitle preview
          const response = await fetch(url);
          if (!response.ok) throw new Error('Failed to fetch subtitle');
          
          const text = await response.text();
          previewBody.innerHTML = `<pre class="preview-subtitle">${text}</pre>`;
        } else {
          // Generic preview
          previewBody.innerHTML = `
            <div style="padding: 20px; text-align: center;">
              <p>Preview not available for this media type.</p>
              <a href="${url}" target="_blank" class="download-btn" style="display: inline-block; margin-top: 10px;">
                Open in new tab
              </a>
            </div>
          `;
        }
      } catch (error) {
        previewBody.innerHTML = `
          <div style="padding: 20px; text-align: center; color: var(--primary);">
            <p>Error loading preview: ${error.message}</p>
            <a href="${url}" target="_blank" class="download-btn" style="display: inline-block; margin-top: 10px;">
              Try opening in new tab
            </a>
          </div>
        `;
      }
    }

    // Close preview
    function closePreview() {
      const previewContainer = document.getElementById('previewContainer');
      const previewBody = document.getElementById('previewBody');
      
      previewContainer.classList.remove('active');
      // Clear content after animation completes
      setTimeout(() => {
        previewBody.innerHTML = '';
      }, 300);
    }

    // Filter media by type
    function filterMedia(type) {
      // Update active filter button
      document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
      document.getElementById(`filter${type.charAt(0).toUpperCase() + type.slice(1)}`).classList.add('active');
      
      // Filter items in main list
      document.querySelectorAll('#episodeList .media-item').forEach(item => {
        if (type === 'all' || item.classList.contains(type)) {
          item.style.display = '';
        } else {
          item.style.display = 'none';
        }
      });
      
      // Filter items in season lists
      document.querySelectorAll('[id^="season"][id$="List"] .media-item').forEach(item => {
        if (type === 'all' || item.classList.contains(type)) {
          item.style.display = '';
        } else {
          item.style.display = 'none';
        }
      });
      
      showToast(`Showing ${type === 'all' ? 'all media' : type + ' files'}`);
    }

    // Toggle season content visibility
    function toggleSeason(season) {
      const content = document.getElementById(`season${season}Content`);
      const chevron = content.previousElementSibling.querySelector('.chevron');
      
      content.classList.toggle('open');
      chevron.classList.toggle('open');
    }

    // Select all episodes in a season
    function selectSeason(season) {
      document.querySelectorAll(`.seasonEp${season}`).forEach(checkbox => {
        // Only select visible items (respects current filter)
        if (checkbox.closest('li').style.display !== 'none') {
          checkbox.checked = true;
          
          // Update corresponding checkbox in main list
          const mainCheckbox = document.getElementById(`s${season}e${checkbox.dataset.episode}`);
          if (mainCheckbox) mainCheckbox.checked = true;
        }
      });
      
      updateSelectedCount();
      showToast(`Selected all visible episodes in Season ${season}`);
    }

    // Deselect all episodes in a season
    function deselectSeason(season) {
      document.querySelectorAll(`.seasonEp${season}`).forEach(checkbox => {
        checkbox.checked = false;
        
        // Update corresponding checkbox in main list
        const mainCheckbox = document.getElementById(`s${season}e${checkbox.dataset.episode}`);
        if (mainCheckbox) mainCheckbox.checked = false;
      });
      
      updateSelectedCount();
      showToast(`Deselected all episodes in Season ${season}`);
    }

    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', function() {
        // Update active tab
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        
        // Show/hide views
        const tabName = this.dataset.tab;
        if (tabName === 'all') {
          document.getElementById('allEpisodesView').style.display = 'block';
          document.getElementById('seasonsView').style.display = 'none';
        } else {
          document.getElementById('allEpisodesView').style.display = 'none';
          document.getElementById('seasonsView').style.display = 'block';
        }
      });
    });

    // Download delay slider
    document.getElementById('downloadDelay').addEventListener('input', function() {
      const value = parseInt(this.value);
      document.getElementById('delayValue').textContent = value;
      userPrefs.downloadDelay = value;
      savePreferences();
    });

    // Track selected count
    function updateSelectedCount() {
      const count = document.querySelectorAll('#episodeList input[type="checkbox"]:checked').length;
      const countElement = document.getElementById('selectedCount');
      countElement.textContent = count === 1 ? '1 selected' : `${count} selected`;
    }

    // Parse season and episode from string like "S01E05"
    function parseSeasonEpisode(str) {
      const regex = /S(\d+)E(\d+)/i;
      const match = str.match(regex);
      if (match) {
        return {
          season: parseInt(match[1]),
          episode: parseInt(match[2])
        };
      }
      return null;
    }

    // Select episodes by range
    function selectRange() {
      const input = document.getElementById('rangeInput').value.trim();
      
      if (!input) {
        showToast('Please enter a valid range!', 3000);
        return;
      }
      
      // First uncheck all
      document.querySelectorAll('.epCb').forEach(checkbox => {
        checkbox.checked = false;
      });
      
      let start, end;
      let count = 0;
      
      if (input.includes('-')) {
        // Range like S01E02-S01E05 or S01E02-E05
        const [startStr, endStr] = input.split('-').map(s => s.trim());
        
        start = parseSeasonEpisode(startStr);
        if (!start) {
          showToast('Invalid start format! Use S01E02 format.', 3000);
          return;
        }
        
        // Handle end format: S01E05 or just E05
        if (endStr.toUpperCase().startsWith('E')) {
          // Format is E05, use same season as start
          const epNum = parseInt(endStr.substring(1));
          if (isNaN(epNum)) {
            showToast('Invalid end episode number!', 3000);
            return;
          }
          end = { season: start.season, episode: epNum };
        } else {
          // Format is S01E05
          end = parseSeasonEpisode(endStr);
          if (!end) {
            showToast('Invalid end format! Use S01E05 format.', 3000);
            return;
          }
        }
      } else {
        // Single episode like S01E05
        start = parseSeasonEpisode(input);
        if (!start) {
          showToast('Invalid format! Use S01E05 format.', 3000);
          return;
        }
        end = start;
      }
      
      // Select episodes in range
      episodes.forEach(ep => {
        if (
          (ep.season > start.season || (ep.season === start.season && ep.episode >= start.episode)) &&
          (ep.season < end.season || (ep.season === end.season && ep.episode <= end.episode))
        ) {
          // Only select visible items (respects current filter)
          const mainCheckbox = document.getElementById(`s${ep.season}e${ep.episode}`);
          const seasonCheckbox = document.getElementById(`season${ep.season}ep${ep.episode}`);
          
          if (mainCheckbox && mainCheckbox.closest('li').style.display !== 'none') {
            mainCheckbox.checked = true;
            count++;
          }
          
          if (seasonCheckbox) {
            seasonCheckbox.checked = true;
          }
        }
      });
      
      updateSelectedCount();
      
      const rangeText = start.season === end.season && start.episode === end.episode
        ? `S${start.season.toString().padStart(2, '0')}E${start.episode.toString().padStart(2, '0')}`
        : `S${start.season.toString().padStart(2, '0')}E${start.episode.toString().padStart(2, '0')} to S${end.season.toString().padStart(2, '0')}E${end.episode.toString().padStart(2, '0')}`;
      
      showToast(`Selected ${count} episodes in range ${rangeText}`);
    }

    // Select all episodes
    function selectAll() {
      document.querySelectorAll('#episodeList .media-item').forEach(item => {
        // Only select visible items (respects current filter)
        if (item.style.display !== 'none') {
          const checkbox = item.querySelector('.epCb');
          if (checkbox) checkbox.checked = true;
        }
      });
      updateSelectedCount();
      showToast('All visible episodes selected');
    }

    // Deselect all episodes
    function deselectAll() {
      document.querySelectorAll('.epCb').forEach(checkbox => {
        checkbox.checked = false;
      });
      updateSelectedCount();
      showToast('All episodes deselected');
    }

    // Search functionality
    document.getElementById('searchInput').addEventListener('input', function() {
      const searchTerm = this.value.toLowerCase();
      
      // Search in main list
      document.querySelectorAll('#episodeList li').forEach(item => {
        const text = item.textContent.toLowerCase();
        if (text.includes(searchTerm)) {
          item.style.display = '';
        } else {
          item.style.display = 'none';
        }
      });
      
      // Search in season lists
      document.querySelectorAll('[id^="season"][id$="List"] li').forEach(item => {
        const text = item.textContent.toLowerCase();
        if (text.includes(searchTerm)) {
          item.style.display = '';
          // Make sure the season container is open
          const seasonId = item.closest('[id^="season"][id$="Content"]').id;
          const seasonNum = seasonId.replace('season', '').replace('Content', '');
          document.getElementById(`season${seasonNum}Content`).classList.add('open');
        } else {
          item.style.display = 'none';
        }
      });
    });

    // Show toast notification
    function showToast(message, duration = 3000) {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toastMessage');
      
      toastMessage.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, duration);
    }

    // Toggle dark/light mode
    function toggleDarkMode() {
      const isDarkMode = document.body.classList.toggle('dark');
      userPrefs.darkMode = isDarkMode;
      savePreferences();
      
      const themeIcon = document.getElementById('themeIcon');
      const themeText = document.getElementById('themeText');
      
      themeIcon.textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
      themeText.textContent = isDarkMode ? 'Light Mode' : 'Dark Mode';
      
      // Add fade-in animation to the container
      const container = document.querySelector('.container');
      container.style.animation = 'fadeIn 0.5s';
      setTimeout(() => { container.style.animation = ''; }, 500);
    }

    // Get appropriate file extension based on media type
    function getFileExtension(url, mediaType) {
      if (url.includes('.srt')) return '.srt';
      if (url.includes('.vtt')) return '.vtt';
      if (url.includes('.mp4')) return '.mp4';
      if (url.includes('.mkv')) return '.mkv';
      if (url.includes('.avi')) return '.avi';
      
      // Default extensions based on media type
      switch(mediaType) {
        case 'subtitle': return '.srt';
        case 'video': return '.mp4';
        default: return '.txt';
      }
    }

    // Download selected media
    async function downloadSelected() {
      const selected = document.querySelectorAll('#episodeList input[type="checkbox"]:checked');
      
      if (selected.length === 0) {
        showToast('Please select at least one episode', 3000);
        return;
      }
      
      const progressText = document.getElementById('progressText');
      const progressBar = document.getElementById('progressBar');
      const progressBarFill = document.getElementById('progressBarFill');
      const downloadDelay = userPrefs.downloadDelay;
      
      progressText.textContent = `Preparing to download ${selected.length} files...`;
      progressBar.style.display = 'block';
      progressBarFill.style.width = '0%';
      
      let successCount = 0;
      let failCount = 0;
      
      for (let i = 0; i < selected.length; i++) {
        const checkbox = selected[i];
        const listItem = checkbox.closest('li');
        const url = checkbox.value;
        const fname = checkbox.dataset.fname;
        const mediaType = checkbox.dataset.mediaType;
        
        try {
          // Update progress
          progressText.textContent = `Downloading ${i + 1}/${selected.length}: ${fname}`;
          progressBarFill.style.width = `${((i + 1) / selected.length) * 100}%`;
          
          // Add visual pulse effect
          listItem.style.animation = 'pulse 0.5s';
          
          // Fetch and download the file
          const res = await fetch(url);
          if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
          
          const blob = await res.blob();
          const a = document.createElement('a');
          a.href = URL.createObjectURL(blob);
          
          // Ensure filename has appropriate extension
          let downloadName = fname;
          if (!downloadName.includes('.')) {
            const ext = getFileExtension(url, mediaType);
            downloadName += ext;
          }
          
          a.download = downloadName;
          a.click();
          
          // Mark as downloaded
          listItem.classList.add('downloaded');
          successCount++;
          
          // Small delay between downloads (configurable)
          await new Promise(r => setTimeout(r, downloadDelay));
        } catch (error) {
          console.error(`Error downloading ${fname}:`, error);
          failCount++;
        } finally {
          // Reset animation
          setTimeout(() => { listItem.style.animation = ''; }, 500);
        }
      }
      
      // Show completion message
      if (failCount === 0) {
        progressText.textContent = `‚úÖ Successfully downloaded ${successCount} files!`;
        showToast(`Downloaded ${successCount} files successfully!`, 4000);
      } else {
        progressText.textContent = `‚úÖ Downloaded ${successCount} files, ‚ùå Failed: ${failCount}`;
        showToast(`Downloaded ${successCount} files, ${failCount} failed`, 4000);
      }

      // Hide progress bar after a delay
      setTimeout(() => {
        progressBar.style.display = 'none';
      }, 5000);
    }

    // Add fade-in animation on page load
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelector('.container').style.animation = 'fadeIn 0.8s';
      
      // Load user preferences
      loadPreferences();
      
      // Open first season by default in season view
      const firstSeason = document.querySelector('.season-content');
      if (firstSeason) {
        firstSeason.classList.add('open');
        firstSeason.previousElementSibling.querySelector('.chevron').classList.add('open');
      }
      
      populateEpisodeList();
    });
  </script>
</body>
</html>